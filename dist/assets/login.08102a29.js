import"./style.c0ed6924.js";import{A as i,T as r,E as d}from"./common.af54bc4c.js";const l="07aa428ea8c44555bf2a498e3d5905ed",E={VITE_CLIENT_ID:"07aa428ea8c44555bf2a498e3d5905ed",VITE_API_BASE_URL:"https://api.spotify.com/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_REDIRECT_URI,a={VITE_CLIENT_ID:"07aa428ea8c44555bf2a498e3d5905ed",VITE_API_BASE_URL:"https://api.spotify.com/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APP_URL,w="user-top-read user-follow-read playlist-read-private user-library-read",I=()=>{const e=`https://accounts.spotify.com/authorize?client_id=${l}&response_type=token&redirect_uri=${E}&scope=${w}&show_dialog=true`;window.open(e,"login","width = 500 height = 500")};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-to-spotify").addEventListener("click",I)});window.setItemsInLocalStorage=({accessToken:e,tokenType:t,expiresIn:o})=>{localStorage.setItem(i,e),localStorage.setItem(r,t),localStorage.setItem(d,Date.now()+o*1e3),window.location.href=a};window.addEventListener("load",()=>{if(localStorage.getItem("ACCESS_TOKEN")&&(window.location.href=`${a}/dashboard/dashboard.html`),window.opener!==null&&!window.opener.closed){window.focus(),window.location.href.includes("error")&&window.close();const{hash:t}=window.location,o=new URLSearchParams(t),n=o.get("#access_token"),s=o.get("token_type"),c=o.get("expires_in");n&&(window.close(),window.opener.setItemsInLocalStorage({accessToken:n,tokenType:s,expiresIn:c}),win)}});
