import"./style.c0ed6924.js";import{A as i,T as r,E as l}from"./common.0976617c.js";const d="07aa428ea8c44555bf2a498e3d5905ed",w="http://localhost:4173/login/login.html",s="http://localhost:4173",h="user-top-read user-follow-read playlist-read-private user-library-read",p=()=>{const o=`https://accounts.spotify.com/authorize?client_id=${d}&response_type=token&redirect_uri=${w}&scope=${h}&show_dialog=true`;window.open(o,"login","width = 500 height = 500")};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-to-spotify").addEventListener("click",p)});window.setItemsInLocalStorage=({accessToken:o,tokenType:t,expiresIn:e})=>{localStorage.setItem(i,o),localStorage.setItem(r,t),localStorage.setItem(l,Date.now()+e*1e3),window.location.href=s};window.addEventListener("load",()=>{if(localStorage.getItem("ACCESS_TOKEN")&&(window.location.href=`${s}/dashboard/dashboard.html`),window.opener!==null&&!window.opener.closed){window.focus(),window.location.href.includes("error")&&window.close();const{hash:t}=window.location,e=new URLSearchParams(t),n=e.get("#access_token"),a=e.get("token_type"),c=e.get("expires_in");n&&(window.close(),window.opener.setItemsInLocalStorage({accessToken:n,tokenType:a,expiresIn:c}),win)}});
